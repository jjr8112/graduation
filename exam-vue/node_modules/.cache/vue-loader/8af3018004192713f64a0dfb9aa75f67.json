{"remainingRequest":"D:\\code\\exam_system\\exam-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\exam_system\\exam-vue\\src\\components\\MarkManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\exam_system\\exam-vue\\src\\components\\MarkManage.vue","mtime":1648014851567},{"path":"D:\\code\\exam_system\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\exam_system\\exam-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\code\\exam_system\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\exam_system\\exam-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFya01hbmFnZScsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVyeUluZm86IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDEwCiAgICAgIH0sCiAgICAgIC8v6ICD6K+V6K6w5b2VCiAgICAgIGV4YW1SZWNvcmRzOiBbXSwKICAgICAgLy/ooajmoLzmlbDmja7liqDovb0KICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgLy/miYDmnInogIPor5Xkv6Hmga8KICAgICAgYWxsRXhhbUluZm86IFtdLAogICAgICAvL+aAu+aVsAogICAgICB0b3RhbDogMAogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldEV4YW1SZWNvcmRzKCkKICAgIHRoaXMuZ2V0QWxsRXhhbUluZm8oKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0RXhhbVJlY29yZHMgKCkgewogICAgICBhd2FpdCB0aGlzLiRodHRwLmdldCh0aGlzLkFQSS5nZXRFeGFtUmVjb3JkLCB7IHBhcmFtczogdGhpcy5xdWVyeUluZm8gfSkudGhlbigocmVzcCkgPT4gewogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmdldEFsbEV4YW1JbmZvKCkKICAgICAgICAgIHJlc3AuZGF0YS5kYXRhLmV4YW1SZWNvcmRzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KHRoaXMuQVBJLmdldFVzZXJCeUlkICsgJy8nICsgaXRlbS51c2VySWQpLnRoZW4oKHIpID0+IHsKICAgICAgICAgICAgICBpdGVtLnRydWVOYW1lID0gci5kYXRhLmRhdGEudHJ1ZU5hbWUKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmV4YW1SZWNvcmRzID0gcmVzcC5kYXRhLmRhdGEuZXhhbVJlY29yZHMKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwLmRhdGEuZGF0YS50b3RhbAogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZ2V0QWxsRXhhbUluZm8gKCkgewogICAgICB0aGlzLiRodHRwLmdldCh0aGlzLkFQSS5hbGxFeGFtSW5mbykudGhlbigocmVzcCkgPT4gewogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmFsbEV4YW1JbmZvID0gcmVzcC5kYXRhLmRhdGEKICAgICAgICAgIHRoaXMuc2V0RXhhbU5hbWUoKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBvcGVyYXRpb24gKHYpIHsKICAgICAgaWYgKHYgPT09ICcnKSB0aGlzLnF1ZXJ5SW5mby5leGFtSWQgPSBudWxsCiAgICAgIHRoaXMuZ2V0RXhhbVJlY29yZHMoKQogICAgfSwKICAgIHNldEV4YW1OYW1lICgpIHsKICAgICAgdGhpcy5leGFtUmVjb3Jkcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIHRoaXMuYWxsRXhhbUluZm8uZm9yRWFjaChpMiA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5leGFtSWQgPT09IGkyLmV4YW1JZCkgewogICAgICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2V4YW1OYW1lJywgaTIuZXhhbU5hbWUpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvL+WIhumhtemhtemdouWkp+Wwj+aUueWPmAogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gdmFsCiAgICAgIHRoaXMuZ2V0RXhhbVJlY29yZHMoKQogICAgfSwKICAgIC8v5YiG6aG15o+S5Lu255qE6aG15pWwCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU5vID0gdmFsCiAgICAgIHRoaXMuZ2V0RXhhbVJlY29yZHMoKQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["MarkManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MarkManage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-container>\r\n    <el-header>\r\n      <!--操作的下拉框-->\r\n      <el-select @change=\"operation\" clearable v-model=\"queryInfo.examId\"\r\n                 placeholder=\"请选择考试\" style=\"margin-bottom: 25px;\">\r\n        <el-option v-for=\"(item,index) in allExamInfo\" :key=\"index\" :label=\"item.examName\" :value=\"parseInt(item.examId)\">\r\n          <span style=\"float: left\">{{ item.examName }}</span>\r\n        </el-option>\r\n      </el-select>\r\n\r\n    </el-header>\r\n\r\n    <el-main>\r\n      <el-table\r\n        ref=\"questionTable\"\r\n        highlight-current-row\r\n        v-loading=\"loading\"\r\n        :border=\"true\"\r\n        :data=\"examRecords\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%;\">\r\n\r\n        <el-table-column align=\"center\" prop=\"examName\" label=\"考试名称\"></el-table-column>\r\n\r\n        <el-table-column align=\"center\" prop=\"examTime\" label=\"参考时间\"></el-table-column>\r\n\r\n        <el-table-column align=\"center\" prop=\"trueName\" label=\"参考人\"></el-table-column>\r\n\r\n        <el-table-column align=\"center\" prop=\"logicScore\" label=\"逻辑题得分\"></el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"是否批阅\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.totalScore === null ? '未批阅' : '已批阅' }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"总分\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.totalScore === null ? 0 : scope.row.totalScore }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- <el-button :type=\"scope.row.totalScore === null ? 'primary' : 'warning'\" icon=\"el-icon-view\" size=\"small\" :disabled=\"scope.row.totalScore !== null\"\r\n                       @click=\"$router.push('/markExam/' + scope.row.recordId)\">\r\n              {{ scope.row.totalScore === null ? '批阅' : '已批阅'}}\r\n            </el-button> -->\r\n            <el-button :type=\"scope.row.totalScore === null ? 'primary' : 'warning'\" icon=\"el-icon-view\" size=\"small\" :disabled=\"scope.row.totalScore !== null\"\r\n                       @click=\"$router.push('/markExam/' + scope.row.recordId)\">\r\n              {{ scope.row.totalScore === null ? '批阅' : '已批阅'}}\r\n            </el-button>\r\n            \r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"查看\">\r\n          <template slot-scope=\"scope\">\r\n              <el-button :type=\"scope.row.totalScore === null ? 'warning' : 'primary'\" icon=\"el-icon-view\" size=\"small\" :disabled=\"scope.row.totalScore == null\"\r\n                       @click=\"$router.push('/reviewMarkExam/' + scope.row.recordId)\">\r\n              {{ scope.row.totalScore === null ? '未批阅' : '查看'}} <!--null ? '批阅' : '已批阅'}}-->\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n      </el-table>\r\n\r\n      <!--分页-->\r\n      <el-pagination style=\"margin-top: 25px\"\r\n                     @size-change=\"handleSizeChange\"\r\n                     @current-change=\"handleCurrentChange\"\r\n                     :current-page=\"queryInfo.pageNo\"\r\n                     :page-sizes=\"[10, 20, 30, 50]\"\r\n                     :page-size=\"queryInfo.pageSize\"\r\n                     layout=\"total, sizes, prev, pager, next, jumper\"\r\n                     :total=\"total\">\r\n      </el-pagination>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'MarkManage',\r\n    data () {\r\n      return {\r\n        queryInfo: {\r\n          pageNo: 1,\r\n          pageSize: 10\r\n        },\r\n        //考试记录\r\n        examRecords: [],\r\n        //表格数据加载\r\n        loading: true,\r\n        //所有考试信息\r\n        allExamInfo: [],\r\n        //总数\r\n        total: 0\r\n      }\r\n    },\r\n    created () {\r\n      this.getExamRecords()\r\n      this.getAllExamInfo()\r\n    },\r\n    methods: {\r\n      async getExamRecords () {\r\n        await this.$http.get(this.API.getExamRecord, { params: this.queryInfo }).then((resp) => {\r\n          if (resp.data.code === 200) {\r\n            this.getAllExamInfo()\r\n            resp.data.data.examRecords.forEach(item => {\r\n              this.$http.get(this.API.getUserById + '/' + item.userId).then((r) => {\r\n                item.trueName = r.data.data.trueName\r\n              })\r\n            })\r\n            this.examRecords = resp.data.data.examRecords\r\n            this.total = resp.data.data.total\r\n            this.loading = false\r\n          }\r\n        })\r\n      },\r\n      getAllExamInfo () {\r\n        this.$http.get(this.API.allExamInfo).then((resp) => {\r\n          if (resp.data.code === 200) {\r\n            this.allExamInfo = resp.data.data\r\n            this.setExamName()\r\n          }\r\n        })\r\n      },\r\n      operation (v) {\r\n        if (v === '') this.queryInfo.examId = null\r\n        this.getExamRecords()\r\n      },\r\n      setExamName () {\r\n        this.examRecords.forEach(item => {\r\n          this.allExamInfo.forEach(i2 => {\r\n            if (item.examId === i2.examId) {\r\n              this.$set(item, 'examName', i2.examName)\r\n            }\r\n          })\r\n        })\r\n      },\r\n      //分页页面大小改变\r\n      handleSizeChange (val) {\r\n        this.queryInfo.pageSize = val\r\n        this.getExamRecords()\r\n      },\r\n      //分页插件的页数\r\n      handleCurrentChange (val) {\r\n        this.queryInfo.pageNo = val\r\n        this.getExamRecords()\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .el-container {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .el-input {\r\n    width: 200px;\r\n  }\r\n\r\n  .el-container {\r\n    animation: leftMoveIn .7s ease-in;\r\n  }\r\n\r\n  @keyframes leftMoveIn {\r\n    0% {\r\n      transform: translateX(-100%);\r\n      opacity: 0;\r\n    }\r\n    100% {\r\n      transform: translateX(0%);\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  .role {\r\n    color: #606266;\r\n  }\r\n\r\n  /deep/ .el-table thead {\r\n    color: rgb(85, 85, 85) !important;\r\n  }\r\n\r\n  /*表格的头部样式*/\r\n  /deep/ .has-gutter tr th {\r\n    background: rgb(242, 243, 244);\r\n    color: rgb(85, 85, 85);\r\n    font-weight: bold;\r\n    line-height: 32px;\r\n  }\r\n\r\n  .el-table {\r\n    box-shadow: 0 0 1px 1px gainsboro;\r\n  }\r\n</style>\r\n"]}]}